SELECT datname AS "Database Name",
       pg_get_userbyid(datdba) AS "Owner",
       pg_encoding_to_char(encoding) AS "Encoding",
       datcollate AS "Collate",
       datctype AS "Ctype",
       datistemplate AS "Is Template",
       datallowconn AS "Allow Connections"
FROM pg_database
WHERE datname NOT IN ('template0', 'template1')
ORDER BY "Database Name";


SELECT n.nspname as schema_name,
       t.typname as type_name,
       CASE
           WHEN t.typtype = 'e' THEN 'enum'
           WHEN t.typtype = 'c' THEN 'composite'
           WHEN t.typtype = 'r' THEN 'range'
           ELSE 'other'
       END as type_category
FROM pg_type t
JOIN pg_namespace n ON n.oid = t.typnamespace
WHERE n.nspname NOT IN ('pg_catalog', 'information_schema')
AND t.typrelid = 0  -- Exclude table row types
AND NOT EXISTS (
    SELECT 1
    FROM pg_catalog.pg_type el
    WHERE el.oid = t.typelem AND el.typarray = t.oid
);



RUN apt-get install -y postgresql-9.6 postgresql-client-9.6 postgresql-contrib-9.6
RUN pg_createcluster 9.6 main
RUN echo "listen_addresses = '*'" >> /etc/postgresql/9.6/main/postgresql.conf
RUN echo "host  all  all 0.0.0.0/0 md5">>/etc/postgresql/9.6/main/pg_hba.conf


   usermod -aG sudo pompom \
    su pompom

    USER postgres
    RUN pg_ctl -D /usr/local/pgsql/data initdb
    RUN chown postgres /usr/local/pgsql/data
    RUN /usr/lib/postgresql/16/bin/pg_ctl -D /usr/local/pgsql/data -l logfile start
RUN postgres -D /usr/local/pgsql/data



RUN  pg_ctl -D /usr/local/pgsql/data initdb